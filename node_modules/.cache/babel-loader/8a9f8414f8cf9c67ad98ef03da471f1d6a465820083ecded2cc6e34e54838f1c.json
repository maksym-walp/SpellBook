{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import spellConfig from'../config/spellConfig.json';import'./SpellDetail.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SpellDetail=()=>{const[spell,setSpell]=useState(null);const[selectedLevel,setSelectedLevel]=useState(null);const{id}=useParams();useEffect(()=>{fetch(\"/api/spells/\".concat(id)).then(res=>res.json()).then(data=>{setSpell(data);setSelectedLevel(data.level);}).catch(err=>console.error(\"Failed to fetch spell details:\",err));},[id]);if(!spell){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});}const getDurationText=duration=>{if(duration.unit==='moment')return'–ú–∏—Ç—å';const unit=spellConfig.durationUnits.find(u=>u.value===duration.unit);if(!unit)return'–ù–µ–≤—ñ–¥–æ–º–æ';if(!unit.requiresValue)return unit.label;if(duration.unit==='custom')return\"\".concat(duration.value,\" \").concat(duration.customUnit);return\"\".concat(duration.value,\" \").concat(unit.label.toLowerCase());};const availableLevels=[spell.level];if(spell.hasHigherLevels){Object.keys(spell.higherLevels).forEach(level=>{availableLevels.push(parseInt(level));});}availableLevels.sort((a,b)=>a-b);const getCurrentDescription=()=>{if(selectedLevel===spell.level){return{narrative:spell.narrativeDescription,mechanical:spell.mechanicalDescription};}return spell.higherLevels[selectedLevel]||{narrative:'–ù–µ–º–∞—î –æ–ø–∏—Å—É –¥–ª—è —Ü—å–æ–≥–æ —Ä—ñ–≤–Ω—è',mechanical:'–ù–µ–º–∞—î –æ–ø–∏—Å—É –¥–ª—è —Ü—å–æ–≥–æ —Ä—ñ–≤–Ω—è'};};const description=getCurrentDescription();return/*#__PURE__*/_jsxs(\"div\",{className:\"spell-detail-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:spell.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"spell-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0420\\u0456\\u0432\\u0435\\u043D\\u044C:\"}),\" \",spell.level]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0410\\u0440\\u043A\\u0430\\u043D\\u0456\\u0447\\u043D\\u0456 \\u0442\\u0440\\u0430\\u0434\\u0438\\u0446\\u0456\\u0457:\"}),\" \",spell.traditions.join(', ')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spell-properties\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCA0 \\u041A\\u0456\\u043B\\u044C\\u043A\\u0456\\u0441\\u0442\\u044C \\u0434\\u0456\\u0439:\"}),\" \",spell.actions]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDEB6 \\u0412\\u0456\\u0434\\u0441\\u0442\\u0430\\u043D\\u044C:\"}),\" \",spell.range,\" \",spellConfig.range.units]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u231B \\u0422\\u0440\\u0438\\u0432\\u0430\\u043B\\u0456\\u0441\\u0442\\u044C:\"}),\" \",getDurationText(spell.duration)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041A\\u043E\\u043C\\u043F\\u043E\\u043D\\u0435\\u043D\\u0442\\u0438:\"}),\" \",spell.components.join(', ')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spell-flags\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041E\\u0441\\u043E\\u0431\\u043B\\u0438\\u0432\\u043E\\u0441\\u0442\\u0456:\"}),spellConfig.flags.map(flag=>spell[flag.name]&&/*#__PURE__*/_jsx(\"span\",{className:\"flag\",children:flag.label},flag.name)),!spellConfig.flags.some(flag=>spell[flag.name])&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u0411\\u0435\\u0437 \\u043E\\u0441\\u043E\\u0431\\u043B\\u0438\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439\"})]})]}),availableLevels.length>1&&/*#__PURE__*/_jsx(\"div\",{className:\"level-tabs\",children:availableLevels.map(level=>/*#__PURE__*/_jsxs(\"button\",{className:\"level-tab \".concat(selectedLevel===level?'active':''),onClick:()=>setSelectedLevel(level),children:[level,\" \\u0440\\u0456\\u0432\\u0435\\u043D\\u044C\"]},level))}),/*#__PURE__*/_jsxs(\"div\",{className:\"spell-description-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"description-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041D\\u0430\\u0440\\u0430\\u0442\\u0438\\u0432\\u043D\\u0438\\u0439 \\u043E\\u043F\\u0438\\u0441\"}),/*#__PURE__*/_jsx(\"p\",{children:description.narrative})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"description-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041C\\u0435\\u0445\\u0430\\u043D\\u0456\\u0447\\u043D\\u0438\\u0439 \\u043E\\u043F\\u0438\\u0441\"}),/*#__PURE__*/_jsx(\"p\",{children:description.mechanical})]})]})]});};export default SpellDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","spellConfig","jsx","_jsx","jsxs","_jsxs","SpellDetail","spell","setSpell","selectedLevel","setSelectedLevel","id","fetch","concat","then","res","json","data","level","catch","err","console","error","className","children","getDurationText","duration","unit","durationUnits","find","u","value","requiresValue","label","customUnit","toLowerCase","availableLevels","hasHigherLevels","Object","keys","higherLevels","forEach","push","parseInt","sort","a","b","getCurrentDescription","narrative","narrativeDescription","mechanical","mechanicalDescription","description","name","traditions","join","actions","range","units","components","flags","map","flag","some","length","onClick"],"sources":["/home/m-bohach/–î–æ–∫—É–º–µ–Ω—Ç–∏/SpellBook/src/components/SpellDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport spellConfig from '../config/spellConfig.json';\nimport './SpellDetail.css';\n\nconst SpellDetail = () => {\n  const [spell, setSpell] = useState(null);\n  const [selectedLevel, setSelectedLevel] = useState(null);\n  const { id } = useParams();\n\n  useEffect(() => {\n    fetch(`/api/spells/${id}`)\n      .then(res => res.json())\n      .then(data => {\n        setSpell(data);\n        setSelectedLevel(data.level);\n      })\n      .catch(err => console.error(\"Failed to fetch spell details:\", err));\n  }, [id]);\n\n  if (!spell) {\n    return <div className=\"loading\">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>;\n  }\n\n  const getDurationText = (duration) => {\n    if (duration.unit === 'moment') return '–ú–∏—Ç—å';\n    const unit = spellConfig.durationUnits.find(u => u.value === duration.unit);\n    if (!unit) return '–ù–µ–≤—ñ–¥–æ–º–æ';\n    \n    if (!unit.requiresValue) return unit.label;\n    if (duration.unit === 'custom') return `${duration.value} ${duration.customUnit}`;\n    return `${duration.value} ${unit.label.toLowerCase()}`;\n  };\n\n  const availableLevels = [spell.level];\n  if (spell.hasHigherLevels) {\n    Object.keys(spell.higherLevels).forEach(level => {\n      availableLevels.push(parseInt(level));\n    });\n  }\n  availableLevels.sort((a, b) => a - b);\n\n  const getCurrentDescription = () => {\n    if (selectedLevel === spell.level) {\n      return {\n        narrative: spell.narrativeDescription,\n        mechanical: spell.mechanicalDescription\n      };\n    }\n    return spell.higherLevels[selectedLevel] || {\n      narrative: '–ù–µ–º–∞—î –æ–ø–∏—Å—É –¥–ª—è —Ü—å–æ–≥–æ —Ä—ñ–≤–Ω—è',\n      mechanical: '–ù–µ–º–∞—î –æ–ø–∏—Å—É –¥–ª—è —Ü—å–æ–≥–æ —Ä—ñ–≤–Ω—è'\n    };\n  };\n\n  const description = getCurrentDescription();\n\n  return (\n    <div className=\"spell-detail-container\">\n      <h1>{spell.name}</h1>\n      <div className=\"spell-meta\">\n        <span><strong>–†—ñ–≤–µ–Ω—å:</strong> {spell.level}</span>\n        <span><strong>–ê—Ä–∫–∞–Ω—ñ—á–Ω—ñ —Ç—Ä–∞–¥–∏—Ü—ñ—ó:</strong> {spell.traditions.join(', ')}</span>\n      </div>\n      <div className=\"spell-properties\">\n        <p><strong>üí† –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥—ñ–π:</strong> {spell.actions}</p>\n        <p><strong>üö∂ –í—ñ–¥—Å—Ç–∞–Ω—å:</strong> {spell.range} {spellConfig.range.units}</p>\n        <p><strong>‚åõ –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:</strong> {getDurationText(spell.duration)}</p>\n        <p><strong>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:</strong> {spell.components.join(', ')}</p>\n        <div className=\"spell-flags\">\n          <strong>–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:</strong>\n          {spellConfig.flags.map(flag => (\n            spell[flag.name] && (\n              <span key={flag.name} className=\"flag\">\n                {flag.label}\n              </span>\n            )\n          ))}\n          {!spellConfig.flags.some(flag => spell[flag.name]) && (\n            <span>–ë–µ–∑ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç–µ–π</span>\n          )}\n        </div>\n      </div>\n\n      {availableLevels.length > 1 && (\n        <div className=\"level-tabs\">\n          {availableLevels.map(level => (\n            <button\n              key={level}\n              className={`level-tab ${selectedLevel === level ? 'active' : ''}`}\n              onClick={() => setSelectedLevel(level)}\n            >\n              {level} —Ä—ñ–≤–µ–Ω—å\n            </button>\n          ))}\n        </div>\n      )}\n\n      <div className=\"spell-description-full\">\n        <div className=\"description-section\">\n          <h3>–ù–∞—Ä–∞—Ç–∏–≤–Ω–∏–π –æ–ø–∏—Å</h3>\n          <p>{description.narrative}</p>\n        </div>\n        \n        <div className=\"description-section\">\n          <h3>–ú–µ—Ö–∞–Ω—ñ—á–Ω–∏–π –æ–ø–∏—Å</h3>\n          <p>{description.mechanical}</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SpellDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}